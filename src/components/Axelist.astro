---
const achas = [
  { id: "T3_MAIN_AXE", name: "Journeyman's Battleaxe" },
  { id: "T4_MAIN_AXE", name: "Adept's Battleaxe" },
  { id: "T5_MAIN_AXE", name: "Expert's Battleaxe" },
  { id: "T6_MAIN_AXE", name: "Master's Battleaxe" },
  { id: "T7_MAIN_AXE", name: "Grandmaster's Battleaxe" },
  { id: "T8_MAIN_AXE", name: "Elder's Battleaxe" },
  { id: "T4_2H_AXE", name: "Adept's Greataxe" },
  { id: "T5_2H_AXE", name: "Expert's Greataxe" },
  { id: "T6_2H_AXE", name: "Master's Greataxe" },
  { id: "T7_2H_AXE", name: "Grandmaster's Greataxe" },
  { id: "T8_2H_AXE", name: "The Hand of Khor" },
  { id: "T4_2H_HALBERD", name: "Adept's Halberd" },
  { id: "T5_2H_HALBERD", name: "Expert's Halberd" },
  { id: "T6_2H_HALBERD", name: "Master's Halberd" },
  { id: "T7_2H_HALBERD", name: "Grandmaster's Halberd" },
  { id: "T8_2H_HALBERD", name: "Elder's Halberd" },
  { id: "T4_2H_HALBERD_MORGANA", name: "Adept's Carrioncaller" },
  { id: "T5_2H_HALBERD_MORGANA", name: "Expert's Carrioncaller" },
  { id: "T6_2H_HALBERD_MORGANA", name: "Master's Carrioncaller" },
  { id: "T7_2H_HALBERD_MORGANA", name: "Grandmaster's Carrioncaller" },
  { id: "T8_2H_HALBERD_MORGANA", name: "Elder's Carrioncaller" },
  { id: "T4_2H_SCYTHE_HELL", name: "Adept's Infernal Scythe" },
  { id: "T5_2H_SCYTHE_HELL", name: "Expert's Infernal Scythe" },
  { id: "T6_2H_SCYTHE_HELL", name: "Master's Infernal Scythe" },
  { id: "T7_2H_SCYTHE_HELL", name: "Grandmaster's Infernal Scythe" },
  { id: "T8_2H_SCYTHE_HELL", name: "Elder's Infernal Scythe" },
  { id: "T4_2H_DUALAXE_KEEPER", name: "Adept's Bear Paws" },
  { id: "T5_2H_DUALAXE_KEEPER", name: "Expert's Bear Paws" },
  { id: "T6_2H_DUALAXE_KEEPER", name: "Master's Bear Paws" },
  { id: "T7_2H_DUALAXE_KEEPER", name: "Grandmaster's Bear Paws" },
  { id: "T8_2H_DUALAXE_KEEPER", name: "Elder's Bear Paws" },
  { id: "T4_2H_AXE_AVALON", name: "Adept's Realmbreaker" },
  { id: "T5_2H_AXE_AVALON", name: "Expert's Realmbreaker" },
  { id: "T6_2H_AXE_AVALON", name: "Master's Realmbreaker" },
  { id: "T7_2H_AXE_AVALON", name: "Grandmaster's Realmbreaker" },
  { id: "T8_2H_AXE_AVALON", name: "Elder's Realmbreaker" },
];
const calidades = [1, 2, 3, 4, 5, 6, 7, 8];
const ubicacion = [
  "Bridgewatch",
  "Lymhurst",
  "Fort Sterling",
  "Martlock",
  "Thetford",
  "Caerleon",
];
---

<form id="busquedaAchas">
  <label for="tipo_de_achas">Hacha a Buscar</label>
  <select name="tipo_de_achas" id="tipo_de_achas">
    {achas.map((acha) => <option value={acha.id}>{acha.name}</option>)}
  </select>
  <label for="calidad_de_hachas">Calidad del Hacha</label>
  <select name="calidad_de_hachas" id="calidad_de_hachas">
    {calidades.map((calidad) => <option value={calidad}>{calidad}</option>)}
  </select>
  <label for="ubicaciones">elige la ubicacion</label>
  <select name="ubicaciones" id="ubicaciones">
    {ubicacion.map((ciudad) => <option value={ciudad}>{ciudad}</option>)}
  </select>
  <button type="submit">Buscar Acha</button>
</form>
<div id="vista"></div>

<script>
  const form = document.querySelector("form");
  form?.addEventListener("submit", (e) => {
    e.preventDefault();
    const formdata = new FormData(form);
    const arma = formdata.get("calidad_de_hachas");
    const calidad = formdata.get("tipo_de_achas");
    const ubicacion = formdata.get("ubicaciones");
    const consulta =
      "https://west.albion-online-data.com/api/v2/stats/prices/" +
      arma +
      "?locations=" +
      ubicacion +
      "&qualities=" +
      calidad;
    const respuesta = fetch(consulta)
      .then((response) => response.json())
      .then((datos) => datos[0]);
    console.log(respuesta);
  });
</script>
